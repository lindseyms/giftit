<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{layouts/main_layout :: head(title = 'Gift It - Register')}">
    </head>
    <body >
    <nav th:replace="~{layouts/main_layout :: nav}"></nav>

 <div style="color:white; padding-top: 40px" class="container">

    <div class="row" th:if="${success}">
        <div class="col-md-3"></div>
        <div class="col-md-6 alert alert-success" role="alert">
            Registration successful!<br>
            <a href="login" style="color: #0339c8">Sign in here</a>
        </div>
        <div class="col-md-3"></div>
    </div>
     <div class="row" th:if="${failed}">
         <div class="col-md-3"></div>
         <div class="col-md-6 alert alert-danger" role="alert" >
             Username or Email Already Exists!
         </div>
         <div class="col-md-3"></div>
     </div>

    <form style="padding-top: 60px" class="form-horizontal" role="form" method="POST" th:action="@{/register}" th:object="${user}" th:if="!${success}">
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <h2>Registration</h2>
                <hr>
            </div>
        </div>
        <div class="row" th:if="${validationErrors}">
            <div class="col-md-3"></div>
            <div class="col-md-6">
            <span class="text-danger align-middle">
                <ul th:each="error : ${validationErrors}">
                    <li th:text="${error.getDefaultMessage()}"></li>
                </ul>
            </span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 field-label-responsive">
                <label for="first-name">First Name</label>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <div class="input-group-addon" style="width: 2.6rem"><i class="far fa-user"></i></div>
                        <input type="text"
                               name="first-name"
                               class="form-control"
                               id="first-name"
                               placeholder="First Name"
                               th:field="*{firstName}" required autofocus>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 field-label-responsive">
                <label for="last-name">Last Name</label>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <div class="input-group-addon" style="width: 2.6rem"><i class="far fa-user"></i></div>
                        <input type="text"
                               name="last-name"
                               class="form-control"
                               id="last-name"
                               placeholder="Last Name"
                               th:field="*{lastName}" required autofocus>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 field-label-responsive">
                <label for="username">Username</label>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <div class="input-group-addon" style="width: 2.6rem"><i class="far fa-user"></i></div>
                        <input type="text"
                               name="username"
                               class="form-control"
                               id="username"
                               placeholder="Username"
                               th:field="*{username}" required autofocus>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 field-label-responsive">
                <label for="email">E-Mail Address</label>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <div class="input-group-addon" style="width: 2.6rem"><i class="fa fa-at"></i></div>
                        <input type="email"
                               name="email"
                               class="form-control"
                               id="email"
                               placeholder="you@example.com"
                               th:field="*{email}" required autofocus >
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 field-label-responsive">
                <label for="password">Password</label>
            </div>
            <div class="col-md-6">
                <div class="form-group has-danger">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <div class="input-group-addon" style="width: 2.6rem"><i class="fas fa-lock"></i></div>
                        <input type="password"
                               name="password"
                               class="form-control"
                               id="password"
                               oninput="check(this)"
                               placeholder="Password"
                               th:field="*{password}" required autofocus>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 field-label-responsive">
                <label for="password">Confirm Password</label>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <div class="input-group-addon" style="width: 2.6rem">
                            <i class="fas fa-lock"></i>
                        </div>
                        <input type="password"
                               name="confirmPassword"
                               class="form-control"
                               id="confirmPassword"
                               oninput="check(this)"
                               placeholder="Confirm Password"
                               th:field="*{confirmPassword}" required autofocus>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <button type="submit" class="btn btn-success"><i class="far fa-edit"></i> Register</button>
            </div>
        </div>
    </form>
 </div>

    <script type='text/javascript'>
        function check() {
            if (document.getElementById('confirmPassword').value !== document.getElementById('password').value) {
                document.getElementById('confirmPassword').setCustomValidity('Passwords do not match.');
            }
            else if(document.getElementById('password').value !== document.getElementById('confirmPassword').value){
                document.getElementById('password').setCustomValidity('passwords do not match.');
            }
            else {
                document.getElementById('confirmPassword').setCustomValidity('');
                document.getElementById('password').setCustomValidity('');
            }
        }
    </script>
    </body>
</html>